<html>

<head>
    <title> Pong </title>
    <style>
        .paddle {
            height: 50px;
            width: 5px;
            background-color: black;
            position: absolute;
        }

        #ball {
            position: absolute;
            background-color: black;
            width: 6px;
            height: 6px;
            border-radius: 3px;
        }
    </style>

</head>

<body>
    <div id="paddleLeft" class="paddle"></div>
    <div id="ball"></div>
    <div id="paddleRight" class="paddle"></div>
    <script>
        const gameWidth = 800;
        const gameHeight = 200;
        const paddleHeight = 50;
        const ballSpeed = 5;
        const paddleSpeed = 20;
        const paddleLeft = document.getElementById("paddleLeft");
        const paddleRight = document.getElementById("paddleRight");
        const ball = document.getElementById("ball");
        const paddleLeftX = 5;
        const paddleRightX = gameWidth;
        let paddleLeftY = 5;
        let paddleRightY = 5;
        let ballX = gameWidth / 2;
        let ballY = 5;
        let ballDirectionY = 0;
        let ballDirectionX = ballSpeed;
        let spin = 0;
        paddleLeft.style.left = `${paddleLeftX}px`;
        paddleRight.style.left = `${paddleRightX}px`;

        document.onkeydown = function (ev) {
            spin = 0;
            if (ev.key == "s") {
                paddleLeftY += paddleSpeed;
                spin = 1;
            }
            if (ev.key == "w") {
                paddleLeftY -= paddleSpeed;
                spin = -1;
            }
            if (ev.key == "ArrowDown") {
                paddleRightY += paddleSpeed;
                spin = 1;
            }
            if (ev.key == "ArrowUp") {
                paddleRightY -= paddleSpeed;
                spin = -1;
            }

        }
        function resetGame() {
            ballX = gameWidth / 2;
        }

        function playGame() {

            if (ballX > paddleRightX) {
                if (ballY < paddleRightY || ballY > (paddleRightY + paddleHeight)) {
                    resetGame();

                } else {
                    if (spin != 0) {
                        ballDirectionY += spin;
                    }

                    ballDirectionX = -ballSpeed;
                }
            }
            if (ballX < paddleLeftX) {
                if (ballY < paddleLeftY || ballY > (paddleLeftY + paddleHeight)) {
                    resetGame();
                } else {
                    if (spin != 0) {
                        ballDirectionY += spin;
                    }
                    ballDirectionX = ballSpeed;
                }
            }
            if (ballY < 0 || ballY > gameHeight) {
                ballDirectionY = -ballDirectionY;
            }
            paddleLeft.style.top = `${paddleLeftY}px`;
            paddleRight.style.top = `${paddleRightY}px`;
            ballY += ballDirectionY;
            ball.style.top = `${ballY}px`;
            ballX += ballDirectionX;
            ball.style.left = `${ballX}px`;
            window.requestAnimationFrame(playGame);
        }
        window.requestAnimationFrame(playGame);


    </script>
</body>

</html>